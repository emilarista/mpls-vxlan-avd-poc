type: p
core_interfaces:
  p2p_links_ip_pools:
  - name: underlay_pool
    ipv4_pool: 100.64.48.0/24
  p2p_links_profiles:
  - name: default_bb_profile
    speed: 100full
    mtu: 9178
    isis_hello_padding: false
    isis_metric: 50
    ip_pool: underlay_pool
    isis_circuit_type: level-2
    isis_authentication_mode: md5
    isis_authentication_key: $1c$sTNAlR6rKSw=
  p2p_links:
  - nodes:
    - P-1A
    - PE-1A
    id: 1
    interfaces:
    - Ethernet2
    - Ethernet2
    profile: default_bb_profile
  - nodes:
    - P-1A
    - P-1B
    id: 2
    interfaces:
    - Ethernet6
    - Ethernet6
    profile: default_bb_profile
  - nodes:
    - P-1A
    - P-2A
    id: 3
    interfaces:
    - Ethernet3
    - Ethernet3
    profile: default_bb_profile
  - nodes:
    - P-1B
    - PE-1B
    id: 4
    interfaces:
    - Ethernet2
    - Ethernet2
    profile: default_bb_profile
  - nodes:
    - P-1B
    - P-3A
    id: 5
    interfaces:
    - Ethernet4
    - Ethernet4
    profile: default_bb_profile
  - nodes:
    - P-1B
    - P-4A
    id: 6
    interfaces:
    - Ethernet3
    - Ethernet3
    profile: default_bb_profile
  - nodes:
    - P-3A
    - PE-3
    id: 7
    interfaces:
    - Ethernet2
    - Ethernet4
    profile: default_bb_profile
  - nodes:
    - P-3A
    - P-3B
    id: 8
    interfaces:
    - Ethernet6
    - Ethernet6
    profile: default_bb_profile
  - nodes:
    - P-3A
    - P-2B
    id: 9
    interfaces:
    - Ethernet3
    - Ethernet3
    profile: default_bb_profile
  - nodes:
    - P-3B
    - PE-3
    id: 10
    interfaces:
    - Ethernet2
    - Ethernet5
    profile: default_bb_profile
  - nodes:
    - P-3B
    - P-4B
    id: 11
    interfaces:
    - Ethernet3
    - Ethernet3
    profile: default_bb_profile
  - nodes:
    - P-3B
    - GW3
    id: 12
    interfaces:
    - Ethernet5
    - Ethernet1
    profile: default_bb_profile
  - nodes:
    - P-2A
    - GW2
    id: 14
    interfaces:
    - Ethernet5
    - Ethernet1
    profile: default_bb_profile
  - nodes:
    - P-2A
    - PE-2
    id: 15
    interfaces:
    - Ethernet2
    - Ethernet4
    profile: default_bb_profile
  - nodes:
    - P-2A
    - P-2B
    id: 16
    interfaces:
    - Ethernet6
    - Ethernet6
    profile: default_bb_profile
  - nodes:
    - P-2B
    - PE-2
    id: 17
    interfaces:
    - Ethernet2
    - Ethernet5
    profile: default_bb_profile
  - nodes:
    - P-2B
    - P-4A
    id: 18
    interfaces:
    - Ethernet4
    - Ethernet4
    profile: default_bb_profile
  - nodes:
    - P-4A
    - PE-4A
    id: 19
    interfaces:
    - Ethernet2
    - Ethernet2
    profile: default_bb_profile
  - nodes:
    - P-4A
    - P-4B
    id: 19
    interfaces:
    - Ethernet6
    - Ethernet6
    profile: default_bb_profile
  - nodes:
    - P-4B
    - PE-4B
    id: 19
    interfaces:
    - Ethernet2
    - Ethernet2
    profile: default_bb_profile
cvp_ingestauth_key: dudeface
bgp_maximum_paths: 4
bgp_ecmp: 4
overlay_prevent_readvertise_to_server: true
bfd_multihop:
  interval: 5000
  min_rx: 5000
  multiplier: 3
internal_vlan_order:
  allocation: ascending
  range:
    beginning: 3700
    ending: 3900
management_security:
  password:
    encryption_key_common: true
cvp_instance_ip: 10.20.20.20
mgmt_gateway: 10.30.30.1
name_servers:
- 8.8.8.8
- 8.8.4.4
design:
  type: mpls
fabric_name: MPLS_NETWORK
overlay_routing_protocol: ibgp
underlay_routing_protocol: isis-sr
isis_default_is_type: level-2
isis_default_circuit_type: level-2
isis_default_metric: 50
isis_advertise_passive_only: true
isis_ti_lfa:
  enabled: true
  protection: link
  local_convergence_delay: 15000
bgp_as: 65000
bgp_peer_groups:
  mpls_overlay_peers:
    password: $1c$U4tL2vQP9QwZlxIV1K3/pw==
  rr_overlay_peers:
    password: $1c$U4tL2vQP9QwZlxIV1K3/pw==
overlay_rd_type:
  admin_subfield: overlay_loopback
overlay_rt_type:
  admin_subfield: 65000
p:
  platform: vEOS-LAB
  defaults:
    loopback_ipv4_pool: 100.70.3.0/24
    node_sid_base: 300
    isis_system_id_prefix: '0000.0003'
    loopback_ipv4_offset: 30
  nodes:
    P-1B:
      id: 2
      mgmt_ip: 10.30.30.104/24
    P-2B:
      id: 4
      mgmt_ip: 10.30.30.107/24
    P-3A:
      id: 5
      mgmt_ip: 10.30.30.110/24
    P-3B:
      id: 6
      mgmt_ip: 10.30.30.111/24
    P-4A:
      id: 7
      mgmt_ip: 10.30.30.115/24
    P-4B:
      id: 8
      mgmt_ip: 10.30.30.116/24
pe:
  platform: vEOS-LAB
  defaults:
    virtual_router_mac_address: 00:1c:73:00:dc:00
    platform: vEOS-LAB
    loopback_ipv4_pool: 100.70.1.0/24
    is_type: level-2
    node_sid_base: 100
    isis_system_id_prefix: '0000.0001'
    spanning_tree_priority: 4096
    spanning_tree_mode: mstp
    overlay_address_families:
    - evpn
    - vpn-ipv4
    - vpn-ipv6
    loopback_ipv4_offset: 10
    bgp_defaults:
    - no bgp default ipv4-unicast
    - distance bgp 20 200 200
    - graceful-restart restart-time 300
    - graceful-restart
    mpls_route_reflectors:
    - P-1A
    - P-2A
  node_groups:
    SITE1:
      spanning_tree_root_super: true
      filter:
        tenants: []
        tags: []
      nodes:
        PE-1A:
          id: 1
          mgmt_ip: 10.30.30.101/24
        PE-1B:
          id: 2
          mgmt_ip: 10.30.30.102/24
    SITE2:
      nodes:
        PE-2:
          id: 3
          mgmt_ip: 10.30.30.105/24
    SITE3:
      nodes:
        PE-3:
          id: 4
          mgmt_ip: 10.30.30.109/24
    SITE4:
      spanning_tree_root_super: true
      nodes:
        PE-4A:
          id: 5
          mgmt_ip: 10.30.30.113/24
        PE-4B:
          id: 6
          mgmt_ip: 10.30.30.114/24
rr:
  defaults:
    platform: vEOS-LAB
    loopback_ipv4_pool: 100.70.2.0/24
    is_type: level-2
    node_sid_base: 200
    isis_system_id_prefix: '0000.0002'
    overlay_address_families:
    - evpn
    - vpn-ipv4
    - vpn-ipv6
    bgp_defaults:
    - no bgp default ipv4-unicast
    - distance bgp 20 200 200
    - graceful-restart restart-time 300
    - graceful-restart
    - bgp route-reflector preserve-attributes always
  node_groups:
    P1-2:
      bgp_cluster_id: 12.12.12.12
      structured_config:
        router_bgp:
          neighbors:
            100.64.20.12:
              peer_group: MPLS-OVERLAY-PEERS
              description: GW2
            100.64.30.12:
              peer_group: MPLS-OVERLAY-PEERS
              description: GW3
      nodes:
        P-1A:
          id: 1
          mgmt_ip: 10.30.30.107/24
        P-2A:
          id: 2
          mgmt_ip: 10.30.30.108/24
inventory_file: /Users/emil/scripts/ansible/development/AVD_DIA_CLEARSHARK/inventory.yml
inventory_dir: /Users/emil/scripts/ansible/development/AVD_DIA_CLEARSHARK
ansible_host: 10.30.30.111
inventory_hostname: P-3B
inventory_hostname_short: P-3B
group_names:
- ALL_NODES
- MPLS_NETWORK
- SITE3
- SITE3_P
ansible_facts:
  switch:
    type: p
    node_type_key: p
    connected_endpoints: false
    default_evpn_role: none
    default_underlay_routing_protocol: isis-sr
    default_overlay_routing_protocol: ibgp
    default_overlay_address_families:
    - evpn
    default_mpls_overlay_role: none
    mpls_lsr: true
    mlag_support: false
    network_services_l1: false
    network_services_l2: false
    network_services_l3: false
    underlay_router: true
    uplink_type: p2p
    vtep: false
    mpls_ler: false
    ip_addressing:
      router_id: ip_addressing/router-id.j2
      p2p_uplinks_ip: ip_addressing/p2p-uplinks-ip.j2
      p2p_uplinks_peer_ip: ip_addressing/p2p-uplinks-peer-ip.j2
      ipv6_router_id: ip_addressing/router-id-ipv6.j2
    interface_descriptions:
      underlay_ethernet_interfaces: interface_descriptions/underlay/ethernet-interfaces.j2
      underlay_port_channel_interfaces: interface_descriptions/underlay/port-channel-interfaces.j2
      connected_endpoints_ethernet_interfaces: interface_descriptions/connected_endpoints/ethernet-interfaces.j2
      connected_endpoints_port_channel_interfaces: interface_descriptions/connected_endpoints/port-channel-interfaces.j2
      overlay_loopback_interface: interface_descriptions/loopback_interfaces/overlay-loopback.j2
    id: 6
    mgmt_ip: 10.30.30.111/24
    platform_settings:
      platforms:
      - default
      reload_delay:
        mlag: 300
        non_mlag: 330
      feature_support:
        queue_monitor_length_notify: false
    mgmt_interface: Management1
    underlay_routing_protocol: isis-sr
    overlay_routing_protocol: ibgp
    overlay_address_families:
    - evpn
    overlay_loopback_description: LSR_Router_ID
    spanning_tree_mode: none
    max_uplink_switches: 0
    max_parallel_uplinks: 1
    loopback_ipv4_pool: 100.70.3.0/24
    loopback_ipv4_offset: 30
    router_id: 100.70.3.36
    evpn_role: none
    mpls_overlay_role: none
    bgp_defaults: []
    bgp_peer_groups:
      ipv4_underlay_peers:
        name: IPv4-UNDERLAY-PEERS
      mlag_ipv4_underlay_peer:
        name: MLAG-IPv4-UNDERLAY-PEER
      evpn_overlay_peers:
        name: EVPN-OVERLAY-PEERS
      mpls_overlay_peers:
        name: MPLS-OVERLAY-PEERS
        password: $1c$U4tL2vQP9QwZlxIV1K3/pw==
      rr_overlay_peers:
        name: RR-OVERLAY-PEERS
        password: $1c$U4tL2vQP9QwZlxIV1K3/pw==
    isis_net: 49.0001.0000.0003.0006.00
    is_type: level-2
    isis_instance_name: CORE
    node_sid: 306
    mlag: false
  topology:
    peers: []
    vlans: []
  avd_topology_peers: {}
  avd_overlay_peers: {}
switch:
  type: p
  node_type_key: p
  connected_endpoints: false
  default_evpn_role: none
  default_underlay_routing_protocol: isis-sr
  default_overlay_routing_protocol: ibgp
  default_overlay_address_families:
  - evpn
  default_mpls_overlay_role: none
  mpls_lsr: true
  mlag_support: false
  network_services_l1: false
  network_services_l2: false
  network_services_l3: false
  underlay_router: true
  uplink_type: p2p
  vtep: false
  mpls_ler: false
  ip_addressing:
    router_id: ip_addressing/router-id.j2
    p2p_uplinks_ip: ip_addressing/p2p-uplinks-ip.j2
    p2p_uplinks_peer_ip: ip_addressing/p2p-uplinks-peer-ip.j2
    ipv6_router_id: ip_addressing/router-id-ipv6.j2
  interface_descriptions:
    underlay_ethernet_interfaces: interface_descriptions/underlay/ethernet-interfaces.j2
    underlay_port_channel_interfaces: interface_descriptions/underlay/port-channel-interfaces.j2
    connected_endpoints_ethernet_interfaces: interface_descriptions/connected_endpoints/ethernet-interfaces.j2
    connected_endpoints_port_channel_interfaces: interface_descriptions/connected_endpoints/port-channel-interfaces.j2
    overlay_loopback_interface: interface_descriptions/loopback_interfaces/overlay-loopback.j2
  id: 6
  mgmt_ip: 10.30.30.111/24
  platform_settings:
    platforms:
    - default
    reload_delay:
      mlag: 300
      non_mlag: 330
    feature_support:
      queue_monitor_length_notify: false
  mgmt_interface: Management1
  underlay_routing_protocol: isis-sr
  overlay_routing_protocol: ibgp
  overlay_address_families:
  - evpn
  overlay_loopback_description: LSR_Router_ID
  spanning_tree_mode: none
  max_uplink_switches: 0
  max_parallel_uplinks: 1
  loopback_ipv4_pool: 100.70.3.0/24
  loopback_ipv4_offset: 30
  router_id: 100.70.3.36
  evpn_role: none
  mpls_overlay_role: none
  bgp_defaults: []
  bgp_peer_groups:
    ipv4_underlay_peers:
      name: IPv4-UNDERLAY-PEERS
    mlag_ipv4_underlay_peer:
      name: MLAG-IPv4-UNDERLAY-PEER
    evpn_overlay_peers:
      name: EVPN-OVERLAY-PEERS
    mpls_overlay_peers:
      name: MPLS-OVERLAY-PEERS
      password: $1c$U4tL2vQP9QwZlxIV1K3/pw==
    rr_overlay_peers:
      name: RR-OVERLAY-PEERS
      password: $1c$U4tL2vQP9QwZlxIV1K3/pw==
  isis_net: 49.0001.0000.0003.0006.00
  is_type: level-2
  isis_instance_name: CORE
  node_sid: 306
  mlag: false
topology:
  peers: []
  vlans: []
avd_topology_peers: {}
avd_overlay_peers: {}
playbook_dir: /Users/emil/scripts/ansible/development/AVD_DIA_CLEARSHARK
ansible_playbook_python: /Users/emil/scripts/ansible/development/.avdvenv/bin/python
ansible_config_file: /Users/emil/scripts/ansible/development/AVD_DIA_CLEARSHARK/ansible.cfg
groups:
  all:
  - cv_server
  - PE-3
  - P-3A
  - P-3B
  - PE-4A
  - PE-4B
  - P-4A
  - P-4B
  - GW3
  - LF3
  - SP3
  - PE-1A
  - PE-1B
  - P-1A
  - P-1B
  - GW2
  - LF2
  - SP2
  - PE-2
  - P-2A
  - P-2B
  ungrouped: []
  CVP:
  - cv_server
  ALL_NODES:
  - PE-3
  - P-3A
  - P-3B
  - GW3
  - LF3
  - SP3
  - PE-4A
  - PE-4B
  - P-4A
  - P-4B
  - PE-1A
  - PE-1B
  - P-1A
  - P-1B
  - GW2
  - LF2
  - SP2
  - PE-2
  - P-2A
  - P-2B
  MPLS_NETWORK:
  - PE-3
  - P-3A
  - P-3B
  - PE-4A
  - PE-4B
  - P-4A
  - P-4B
  - PE-1A
  - PE-1B
  - P-1A
  - P-1B
  - PE-2
  - P-2A
  - P-2B
  SITE1:
  - PE-1A
  - PE-1B
  - P-1A
  - P-1B
  SITE1_PE:
  - PE-1A
  - PE-1B
  SITE1_P:
  - P-1A
  - P-1B
  SITE2:
  - PE-2
  - P-2A
  - P-2B
  SITE2_PE:
  - PE-2
  SITE2_P:
  - P-2A
  - P-2B
  SITE3:
  - PE-3
  - P-3A
  - P-3B
  SITE3_PE:
  - PE-3
  SITE3_P:
  - P-3A
  - P-3B
  SITE4:
  - PE-4A
  - PE-4B
  - P-4A
  - P-4B
  SITE4_PE:
  - PE-4A
  - PE-4B
  SITE4_P:
  - P-4A
  - P-4B
  VXLAN_NETWORK:
  - GW3
  - LF3
  - SP3
  - GW2
  - LF2
  - SP2
  VXLAN_ISLAND2:
  - GW2
  - LF2
  - SP2
  SITE_2_LEAFS:
  - GW2
  - LF2
  SITE_2_SPINES:
  - SP2
  VXLAN_ISLAND3:
  - GW3
  - LF3
  - SP3
  SITE_3_LEAFS:
  - GW3
  - LF3
  SITE_3_SPINES:
  - SP3
omit: __omit_place_holder__dafc80fa5d1631fe2924b0cd150087c590ac0d90
ansible_version:
  string: 2.12.2
  full: 2.12.2
  major: 2
  minor: 12
  revision: 2
ansible_check_mode: false
ansible_diff_mode: false
ansible_forks: 16
ansible_inventory_sources:
- /Users/emil/scripts/ansible/development/AVD_DIA_CLEARSHARK/inventory.yml
ansible_skip_tags: []
ansible_run_tags:
- build
- debug
ansible_verbosity: 0
